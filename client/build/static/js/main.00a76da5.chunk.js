(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){n(184);e.exports={fixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(parseFloat(e,10).toFixed(t))},getDirectionalDiff:function(e,t){var n=t-e;return n<-180&&(n+=360),n>180&&(n-=360),n},now:function(){return(new Date).getTime()}}},110:function(e,t,n){e.exports=n(186)},142:function(e,t){e.exports={"motor-light":{text:"Motor - light conditions",values:{rudderTime:200,rudderWait:200,kP:.5,kI:.04,kD:.02,rudderMult:100}},"sail-light":{text:"Sailing - light conditions",values:{rudderTime:200,rudderWait:200,kP:.6,kI:.06,kD:.02,rudderMult:65}},"sail-light-med-downhill":{text:"Sailing - light/med downhill",values:{rudderTime:200,rudderWait:200,kP:1,kI:.04,kD:.02,rudderMult:100}},"sail-med-heavy-downhill":{text:"Sailing - med/heavy downhill",values:{rudderTime:200,rudderWait:400,rudderMult:100,kP:3,kI:.04,kD:.03}}}},186:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),c=n.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(38),i=n(35),o=(n(115),n(116),n(49)),s=n(191),d=n(78),m=function(){return r.a.createElement(s.a,null,r.a.createElement(d.a,null,r.a.createElement(u.b,{to:"/log"},"Log")),r.a.createElement(d.a,null,r.a.createElement(u.b,{to:"/autopilot"},"Autopilot")))},b=function(){return r.a.createElement("div",null,"This is home")},h=n(23),f=n(5).k.array([]),E=f.clear.bind(f),g=Object(h.a)(function(){return r.a.createElement("div",null,r.a.createElement("button",{onClick:E},"Clear"),f.map(function(e,t){return r.a.createElement("div",{key:t},e.level,": ",e.msg)}))}),y=n(8),v=n(6),p=n(13),k=n(12),O=n(14),j=n(188),x=n(187),w=n(189),D=n(190),I=r.a.Component,L=n(41),T=n(2),M=n(142),S=n(40),A=n(143),P=n(183),U=Object(h.a)(function(e){function t(){return Object(y.a)(this,t),Object(p.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"updatePresets",value:function(e){Object(T.a)({preset:e})}},{key:"render",value:function(){var e=this;return L.Maybe.of(T.b.get("preset")).map(function(t){return r.a.createElement(A,{id:"preset-select",onSelect:e.updatePresets.bind(e),title:S.get(M[t],"text")},S.map(M,function(e,t){return r.a.createElement(P,{key:t,eventKey:t},e.text)}))}).getOrElse(null)}}]),t}(I)),W=n(103),C=function(e){var t=e.children;return r.a.createElement(W,{xs:4},r.a.createElement("label",null,t,":"))},V=n(103),R=function(e){var t=e.children;return r.a.createElement(V,{xs:8},t)},H=function(e){var t=e.label,n=e.children;return r.a.createElement(x.a,null,r.a.createElement(C,null,t),r.a.createElement(R,null,void 0===n?"undefined":"object"===typeof n?n:n.toString()))},N=n(40),z=n(104),B=function(e){var t=e.children;return Object(N.isNumber)(t)?J(t):"N/A"},J=function(e){var t=z.fixed(e,3),n="black";return e>0&&(n="green"),e<0&&(n="red"),r.a.createElement("span",{style:{color:n}},t)},K=Object(h.a)(function(e){function t(){return Object(y.a)(this,t),Object(p.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(H,{label:"Course"},Object(N.isNil)(T.b.get("course"))?"---":T.b.get("course")),r.a.createElement(H,{label:"Heading"},T.b.get("heading")),r.a.createElement(H,{label:"Error"},r.a.createElement(B,null,T.b.get("error"))),r.a.createElement(H,{label:"Rudder"},r.a.createElement(B,null,void 0===T.b.get("course")?"N/A":T.b.get("rudder"))," "))}}]),t}(I)),F=n(39),Z=n(3),$=n(185)({cmd:"cmd",ctrl:"ctrl",alt:"alt",shift:"shift",joinWith:"-"}),q=[{key:"rudderTime",text:"RudderTime",inc:10},{key:"rudderWait",text:"Rudder Wait",inc:10},{key:"rudderMult",text:"Rudder mult",inc:5},{key:"kP",text:"P",inc:.05},{key:"kI",text:"I",inc:.01},{key:"kD",text:"D",inc:.01}],G=Object(h.a)(function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(p.a)(this,Object(k.a)(t).call(this,e))).state={adjustableValueIdx:0},n.keyUpListener=n.onKeyUp.bind(Object(Z.a)(n)),document.addEventListener("keyup",n.keyUpListener),n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyUpListener)}},{key:"onKeyUp",value:function(e){var t=$(e);"Down"===t&&this.downArrow(),"Up"===t&&this.upArrow(),"shift-Left"===t&&this.shiftLeft(),"shift-Right"===t&&this.shiftRight()}},{key:"downArrow",value:function(){this.setState({adjustableValueIdx:this.state.adjustableValueIdx<q.length-1?this.state.adjustableValueIdx+1:0})}},{key:"upArrow",value:function(){this.setState({adjustableValueIdx:0===this.state.adjustableValueIdx?Object.keys(q).length-1:this.state.adjustableValueIdx-1})}},{key:"shiftLeft",value:function(){var e=q[this.state.adjustableValueIdx];Object(T.a)(Object(F.a)({},e.key,T.b.get(e.key)-e.inc))}},{key:"shiftRight",value:function(){var e=q[this.state.adjustableValueIdx];Object(T.a)(Object(F.a)({},e.key,T.b.get(e.key)+e.inc))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,q.map(function(t,n){return r.a.createElement(H,{key:t.key,label:t.text},r.a.createElement("span",{key:t.key,style:n===e.state.adjustableValueIdx?Q.highlighted:{}},T.b.get(t.key)))}))}}]),t}(I)),Q={highlighted:{backgroundColor:"black",color:"white"}},X=n(104),Y=Object(h.a)(function(e){function t(e){var n;return Object(y.a)(this,t),n=Object(p.a)(this,Object(k.a)(t).call(this,e)),T.b.get("voltage")||T.b.set("voltage",1023),n.maxDly=0,n.maxMaxDly=0,n.minHz=999999,setInterval(function(){return n.minHz=999999},5e3),setInterval(function(){n.maxMaxDly=Math.max(n.maxMaxDly,n.maxDly),n.maxDly=0},3e5),n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"convertToVolts",value:function(e){return X.fixed(.0049*e*1220/220)}},{key:"render",value:function(){return this.maxDly=isNaN(this.maxDly)?0:Math.max(T.b.get("compassDelay"),this.maxDly),this.minHz=Math.min(T.b.get("hz"),this.minHz),r.a.createElement("div",null,r.a.createElement(H,{label:"Roll"},r.a.createElement(B,null,T.b.get("roll"))),r.a.createElement(H,{label:"Pitch"},r.a.createElement(B,null,T.b.get("pitch"))," "),r.a.createElement(H,{label:"HZ"},T.b.get("hz")),r.a.createElement(H,{label:"Min HZ"},this.minHz),r.a.createElement(H,{label:"R State"},T.b.get("rudderState")),r.a.createElement(H,{label:"Base"},T.b.get("prevBase")),r.a.createElement(H,{label:"Tach"},T.b.get("prevTach")),r.a.createElement(H,{label:"Speed"},T.b.get("prevSpeed")),r.a.createElement(H,{label:"Cmps Dly"},T.b.get("compassDelay")),r.a.createElement(H,{label:"Max Dly"},this.maxDly," (",this.maxMaxDly,")"))}}]),t}(I)),_=function(e){function t(e){var n;return Object(y.a)(this,t),n=Object(p.a)(this,Object(k.a)(t).call(this,e)),document.addEventListener("keyup",n.keyListener),n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"keyListener",value:function(e){!1===e.shiftKey&&("KeyC"===e.code&&L.Either.of(T.b.get("course")).cata(function(){return Object(T.a)({course:T.b.get("heading")})},function(){return Object(T.a)({course:null})}),"ArrowRight"===e.code&&L.Maybe.of(T.b.get("course")).map(function(e){return 359===e?0:e+1}).map(function(e){return T.b.set("course",e),e}).map(function(e){return Object(T.a)({course:e})}),"ArrowLeft"===e.code&&L.Maybe.of(T.b.get("course")).map(function(e){return Object(T.a)({course:e?e-1:359})}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyListener)}},{key:"render",value:function(){return r.a.createElement(j.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(w.a,{style:{paddingBottom:5}},r.a.createElement(U,null))),r.a.createElement(x.a,null,r.a.createElement(w.a,{xs:6},r.a.createElement(D.a,null,r.a.createElement(K,null),r.a.createElement(G,null))),r.a.createElement(w.a,{xs:6},r.a.createElement(D.a,null,r.a.createElement(Y,null)))))}}]),t}(I),ee=function(){return r.a.createElement(o.a,{orientation:"vertical"},r.a.createElement(o.b,{flex:.2},r.a.createElement(m,null)),r.a.createElement(o.c,null),r.a.createElement(o.b,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/log",component:g}),r.a.createElement(i.a,{path:"/autopilot",component:_}),r.a.createElement(i.a,{component:b}))))},te=n(48),ne=Object(h.a)(function(){return r.a.createElement("div",{style:{fontSize:30,paddingLeft:50,paddingTop:50}},r.a.createElement("p",null,r.a.createElement("button",{onClick:re},T.b.get("course")?"On":"Off")),r.a.createElement("p",null,"Course: ",T.b.get("course")),r.a.createElement("p",null,"Heading: ",T.b.get("heading")),r.a.createElement("p",null,"Error: ",r.a.createElement("span",{style:{color:T.b.get("error")<0?"red":"green"}},T.b.get("error"))),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return ae(-1)}},"<--"),r.a.createElement("button",{style:{marginLeft:50},onClick:function(){return ae(1)}},"--\x3e")))}),ae=function(e){var t=T.b.get("course");(t+=e)>359&&(t=0),t<0&&(t=359),le({course:t}),T.b.set("course",t)},re=function(){return T.b.get("course")?le({course:null}):le({course:T.b.get("heading")})},le=function(e){return Object(te.a)("AUTOPILOT",{data:e})},ce=function(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{component:ne}))};c.a.render(r.a.createElement(function(){return r.a.createElement(u.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/mobile",component:ce}),r.a.createElement(i.a,{component:ee})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},2:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c});var a=n(5),r=n(48),l=a.k.map();e.values=l;var c=function(e){return Object(r.a)("AUTOPILOT",{data:e})}}).call(this,n(30))},48:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(109),r=n(2),l=new WebSocket("ws://".concat(window.location.hostname,":3001/ws"));l.onmessage=function(e){var t=JSON.parse(e.data);"AUTOPILOT"===t.event&&r.b.merge(t.data)},l.onopen=function(){return l.send(JSON.stringify({cmd:"register",data:{event:"AUTOPILOT"}}))};var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.send(JSON.stringify({cmd:"send",data:Object(a.a)({event:e},t)}))}}},[[110,1,2]]]);
//# sourceMappingURL=main.00a76da5.chunk.js.map