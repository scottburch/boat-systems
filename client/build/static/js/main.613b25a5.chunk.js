(this["webpackJsonpclient-cra"]=this["webpackJsonpclient-cra"]||[]).push([[0],{73:function(e,t,a){e.exports=a(91)},88:function(e,t){e.exports={"motor-light":{text:"Motor - light conditions",values:{rudderTime:200,rudderWait:200,kP:15,kI:1,kD:1}},"sail-light":{text:"Sailing - light conditions",values:{rudderTime:200,rudderWait:200,kP:60,kI:6,kD:2}},"sail-light-med-downhill":{text:"Sailing - light/med downhill",values:{rudderTime:200,rudderWait:200,kP:100,kI:4,kD:2}},"sail-med-heavy-downhill":{text:"Sailing - med/heavy downhill",values:{rudderTime:200,rudderWait:400,kP:300,kI:4,kD:3}}}},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(24),u=a(30),o=(a(78),a(79),a(42)),s=a(49),m=a(96),d=a(63),h=a(61);const E="CMP-STATE",f="GET-CMP-STATE",b="CMP-CAL";var g=a(32),p=new WebSocket("ws://".concat(window.location.hostname,":3001/ws")),y={};p.onmessage=function(e){var t=JSON.parse(e.data);y[t.event].forEach((function(e){return e(t.data)}))},p.onopen=function(){p.send(JSON.stringify({cmd:"register",data:{event:"AUTOPILOT"}})),p.send(JSON.stringify({cmd:"register",data:{event:"LOG"}})),p.send(JSON.stringify({cmd:"register",data:{event:E}}))};var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.send(JSON.stringify({cmd:"send",data:Object(h.a)({event:e},t)}))},k=function(e,t){y[e]=y[e]||[],y[e].push(t)},O=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){k(E,l);var e=setInterval((function(){return v(f)}),2e3);return function(){var t,a;clearInterval(e),t=E,a=l,Object(g.pull)(y[t],a)}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{style:{width:0}},r.a.createElement("tbody",null,r.a.createElement(j,{label:"Magnetometer Cal"},a.magCal),r.a.createElement(j,{label:"Accelerometer Cal"},a.accCal),r.a.createElement(j,{label:"Gyro Cal"},a.gyroCal),r.a.createElement(j,{label:"Compass Cal"},a.cmpCal))),r.a.createElement(d.a,{onClick:function(){return v(b)}},a.isCal?"Calibrating...":"Calibrate"))},j=function(e){var t=e.label,a=e.children;return r.a.createElement("tr",null,r.a.createElement("td",null,t,":"),r.a.createElement("td",null,a))},x=a(102),C=a(72),w=function(){return r.a.createElement(x.a,null,r.a.createElement(C.a,null,r.a.createElement(i.b,{to:"/log"},"Log")),r.a.createElement(C.a,null,r.a.createElement(i.b,{to:"/autopilot"},"Autopilot")),r.a.createElement(C.a,null,r.a.createElement(i.b,{to:"/compass"},"Compass")),r.a.createElement(C.a,null,r.a.createElement(i.b,{to:"/systems"},"Systems")))},I=function(){return r.a.createElement("div",null,"This is home")},L=a(20),T=a(7),S=T.k.array([]),D=S.clear.bind(S);k("LOG",(function(e){return console.log(e)||S.push(e)}));var P=Object(L.a)((function(){return r.a.createElement("div",null,r.a.createElement("button",{onClick:D},"Clear"),S.map((function(e,t){return r.a.createElement("div",{key:t},e.level,": ",e.msg)})))})),A=a(10),M=a(8),U=a(14),W=a(13),N=a(15),V=a(100),H=a(99),R=a(98),z=a(101),J=r.a.Component,F=a(36);k("AUTOPILOT",(function(e){B.merge(e)}));var B=T.k.map(),K=function(e){return v("AUTOPILOT",{data:e})},G=a(97),Z=a(50),$=a(88),q=a(32),Q=Object(L.a)(function(e){function t(){return Object(A.a)(this,t),Object(U.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(M.a)(t,[{key:"updatePresets",value:function(e){K({preset:e})}},{key:"render",value:function(){var e=this;return F.Maybe.of(B.get("preset")).map((function(t){return r.a.createElement(G.a,{id:"preset-select",onSelect:e.updatePresets.bind(e),title:q.get($[t],"text")},q.map($,(function(e,t){return r.a.createElement(Z.a.Item,{key:t,eventKey:t},e.text)})))})).getOrElse(null)}}]),t}(J)),X=function(e){var t=e.children;return r.a.createElement(R.a,{xs:4},r.a.createElement("label",null,t,":"))},Y=function(e){var t=e.children;return r.a.createElement(R.a,{xs:8},t)},_=function(e){var t=e.label,a=e.children;return r.a.createElement(H.a,null,r.a.createElement(X,null,t),r.a.createElement(Y,null,void 0===a?"undefined":"object"===typeof a?a:a.toString()))},ee=function(e){var t=e.children;return Object(g.isNumber)(t)?te(t):"N/A"},te=function(e){var t=ae(e,3),a="black";return e>0&&(a="green"),e<0&&(a="red"),r.a.createElement("span",{style:{color:a}},t)},ae=function(e,t){return parseFloat(parseFloat(e,10).toFixed(t))},ne=Object(L.a)(function(e){function t(){return Object(A.a)(this,t),Object(U.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_,{label:"Course"},Object(g.isNil)(B.get("course"))?"---":B.get("course")),r.a.createElement(_,{label:"Heading"},B.get("heading")),r.a.createElement(_,{label:"Error"},r.a.createElement(ee,null,B.get("error"))),r.a.createElement(_,{label:"Rudder"},r.a.createElement(ee,null,void 0===B.get("course")?"N/A":B.get("rudder"))," "))}}]),t}(J)),re=a(33),le=a(5),ce=a(90)({cmd:"cmd",ctrl:"ctrl",alt:"alt",shift:"shift",joinWith:"-"}),ie=[{key:"rudderTime",text:"RudderTime",inc:10},{key:"rudderWait",text:"Rudder Wait",inc:10},{key:"kP",text:"P",inc:1},{key:"kI",text:"I",inc:1},{key:"kD",text:"D",inc:1}],ue=Object(L.a)(function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(U.a)(this,Object(W.a)(t).call(this,e))).state={adjustableValueIdx:0},a.keyUpListener=a.onKeyUp.bind(Object(le.a)(a)),document.addEventListener("keyup",a.keyUpListener),a}return Object(N.a)(t,e),Object(M.a)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyUpListener)}},{key:"onKeyUp",value:function(e){var t=ce(e);"Down"===t&&this.downArrow(),"Up"===t&&this.upArrow(),"shift-Left"===t&&this.shiftLeft(),"shift-Right"===t&&this.shiftRight()}},{key:"downArrow",value:function(){this.setState({adjustableValueIdx:this.state.adjustableValueIdx<ie.length-1?this.state.adjustableValueIdx+1:0})}},{key:"upArrow",value:function(){this.setState({adjustableValueIdx:0===this.state.adjustableValueIdx?Object.keys(ie).length-1:this.state.adjustableValueIdx-1})}},{key:"shiftLeft",value:function(){var e=ie[this.state.adjustableValueIdx];K(Object(re.a)({},e.key,B.get(e.key)-e.inc))}},{key:"shiftRight",value:function(){var e=ie[this.state.adjustableValueIdx];K(Object(re.a)({},e.key,B.get(e.key)+e.inc))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,ie.map((function(t,a){return r.a.createElement(_,{key:t.key,label:t.text},r.a.createElement("span",{key:t.key,style:a===e.state.adjustableValueIdx?oe.highlighted:{}},B.get(t.key)))})))}}]),t}(J)),oe={highlighted:{backgroundColor:"black",color:"white"}},se=Object(L.a)(function(e){function t(e){var a;return Object(A.a)(this,t),a=Object(U.a)(this,Object(W.a)(t).call(this,e)),B.get("voltage")||B.set("voltage",1023),a.maxDly=0,a.maxMaxDly=0,a.minHz=999999,setInterval((function(){return a.minHz=999999}),5e3),setInterval((function(){a.maxMaxDly=Math.max(a.maxMaxDly,a.maxDly),a.maxDly=0}),3e5),a}return Object(N.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return this.maxDly=isNaN(this.maxDly)?0:Math.max(B.get("compassDelay"),this.maxDly),this.minHz=Math.min(B.get("hz"),this.minHz),r.a.createElement("div",null,r.a.createElement(_,{label:"Roll"},r.a.createElement(ee,null,B.get("roll"))),r.a.createElement(_,{label:"Pitch"},r.a.createElement(ee,null,B.get("pitch"))," "),r.a.createElement(_,{label:"HZ"},B.get("hz")),r.a.createElement(_,{label:"Min HZ"},this.minHz),r.a.createElement(_,{label:"R State"},B.get("rudderState")),r.a.createElement(_,{label:"Base"},B.get("prevBase")),r.a.createElement(_,{label:"Tach"},B.get("prevTach")),r.a.createElement(_,{label:"Speed"},B.get("prevSpeed")),r.a.createElement(_,{label:"Cmps Dly"},B.get("compassDelay")),r.a.createElement(_,{label:"Max Dly"},this.maxDly," (",this.maxMaxDly,")"))}}]),t}(J)),me=function(e){function t(e){var a;return Object(A.a)(this,t),a=Object(U.a)(this,Object(W.a)(t).call(this,e)),document.addEventListener("keyup",a.keyListener),a}return Object(N.a)(t,e),Object(M.a)(t,[{key:"keyListener",value:function(e){!1===e.shiftKey&&("KeyC"===e.code&&F.Either.of(B.get("course")).cata((function(){return K({course:B.get("heading")})}),(function(){return K({course:null})})),"ArrowRight"===e.code&&F.Maybe.of(B.get("course")).map((function(e){return 359===e?0:e+1})).map((function(e){return B.set("course",e),e})).map((function(e){return K({course:e})})),"ArrowLeft"===e.code&&F.Maybe.of(B.get("course")).map((function(e){return K({course:e?e-1:359})})))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyListener)}},{key:"render",value:function(){return r.a.createElement(V.a,{fluid:!0},r.a.createElement(H.a,null,r.a.createElement(R.a,{style:{paddingBottom:5}},r.a.createElement(Q,null))),r.a.createElement(H.a,null,r.a.createElement(R.a,{xs:6},r.a.createElement(z.a,null,r.a.createElement(ne,null),r.a.createElement(ue,null))),r.a.createElement(R.a,{xs:6},r.a.createElement(z.a,null,r.a.createElement(se,null)))))}}]),t}(J),de=function(e){var t=e.children,a=(e.system,e.withPasscode,Object(n.useState)(!1)),l=Object(s.a)(a,2),c=l[0],i=l[1];Object(n.useEffect)((function(){setTimeout((function(){return i(!0)}),5e3)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{variant:"primary",onClick:function(){},active:c},t))},he=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,null,"Pump out"))},Ee=function(){return r.a.createElement(o.a,{orientation:"vertical"},r.a.createElement(o.b,{flex:.2},r.a.createElement(w,null)),r.a.createElement(o.c,null),r.a.createElement(o.b,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/log",component:P}),r.a.createElement(u.a,{path:"/autopilot",component:me}),r.a.createElement(u.a,{path:"/compass",component:O}),r.a.createElement(u.a,{path:"/systems",component:he}),r.a.createElement(u.a,{component:I}))))},fe=Object(L.a)((function(){return r.a.createElement("div",{style:{fontSize:30,paddingLeft:50,paddingTop:50}},r.a.createElement("p",null,r.a.createElement("button",{onClick:ge},B.get("course")?"On":"Off")),r.a.createElement("p",null,"Course: ",B.get("course")),r.a.createElement("p",null,"Heading: ",B.get("heading")),r.a.createElement("p",null,"Error: ",r.a.createElement("span",{style:{color:B.get("error")<0?"red":"green"}},B.get("error"))),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return be(-1)}},"<--"),r.a.createElement("button",{style:{marginLeft:50},onClick:function(){return be(1)}},"--\x3e")))})),be=function(e){var t=B.get("course");(t+=e)>359&&(t=0),t<0&&(t=359),pe({course:t}),B.set("course",t)},ge=function(){return B.get("course")?pe({course:null}):pe({course:B.get("heading")})},pe=function(e){return v("AUTOPILOT",{data:e})},ye=function(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{component:fe}))};c.a.render(r.a.createElement((function(){return r.a.createElement(i.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/mobile",component:ye}),r.a.createElement(u.a,{component:Ee})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[73,1,2]]]);
//# sourceMappingURL=main.613b25a5.chunk.js.map