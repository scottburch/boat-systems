(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){n(184);e.exports={getDirectionalDiff:function(e,t){var n=t-e;return n<-180&&(n+=360),n>180&&(n-=360),n},now:function(){return(new Date).getTime()}}},110:function(e,t,n){e.exports=n(186)},142:function(e,t){e.exports={"motor-light":{text:"Motor - light conditions",values:{rudderTime:200,rudderWait:200,kP:50,kI:4,kD:2}},"sail-light":{text:"Sailing - light conditions",values:{rudderTime:200,rudderWait:200,kP:60,kI:6,kD:2}},"sail-light-med-downhill":{text:"Sailing - light/med downhill",values:{rudderTime:200,rudderWait:200,kP:100,kI:4,kD:2}},"sail-med-heavy-downhill":{text:"Sailing - med/heavy downhill",values:{rudderTime:200,rudderWait:400,kP:300,kI:4,kD:3}}}},186:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),c=n.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(38),u=n(35),o=(n(115),n(116),n(49)),s=n(191),m=n(78),d=function(){return r.a.createElement(s.a,null,r.a.createElement(m.a,null,r.a.createElement(i.b,{to:"/log"},"Log")),r.a.createElement(m.a,null,r.a.createElement(i.b,{to:"/autopilot"},"Autopilot")))},b=function(){return r.a.createElement("div",null,"This is home")},h=n(23),f=n(5).k.array([]),E=f.clear.bind(f),g=Object(h.a)(function(){return r.a.createElement("div",null,r.a.createElement("button",{onClick:E},"Clear"),f.map(function(e,t){return r.a.createElement("div",{key:t},e.level,": ",e.msg)}))}),y=n(8),p=n(6),v=n(13),k=n(12),O=n(14),j=n(188),x=n(187),w=n(189),D=n(190),I=r.a.Component,L=n(41),T=n(2),S=n(142),A=n(40),M=n(143),P=n(183),U=Object(h.a)(function(e){function t(){return Object(y.a)(this,t),Object(v.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(p.a)(t,[{key:"updatePresets",value:function(e){Object(T.a)({preset:e})}},{key:"render",value:function(){var e=this;return L.Maybe.of(T.b.get("preset")).map(function(t){return r.a.createElement(M,{id:"preset-select",onSelect:e.updatePresets.bind(e),title:A.get(S[t],"text")},A.map(S,function(e,t){return r.a.createElement(P,{key:t,eventKey:t},e.text)}))}).getOrElse(null)}}]),t}(I)),W=n(103),C=function(e){var t=e.children;return r.a.createElement(W,{xs:4},r.a.createElement("label",null,t,":"))},V=n(103),H=function(e){var t=e.children;return r.a.createElement(V,{xs:8},t)},N=function(e){var t=e.label,n=e.children;return r.a.createElement(x.a,null,r.a.createElement(C,null,t),r.a.createElement(H,null,void 0===n?"undefined":"object"===typeof n?n:n.toString()))},R=n(40),z=(n(104),function(e){var t=e.children;return Object(R.isNumber)(t)?B(t):"N/A"}),B=function(e){var t=J(e,3),n="black";return e>0&&(n="green"),e<0&&(n="red"),r.a.createElement("span",{style:{color:n}},t)},J=function(e,t){return parseFloat(parseFloat(e,10).toFixed(t))},K=Object(h.a)(function(e){function t(){return Object(y.a)(this,t),Object(v.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N,{label:"Course"},Object(R.isNil)(T.b.get("course"))?"---":T.b.get("course")),r.a.createElement(N,{label:"Heading"},T.b.get("heading")),r.a.createElement(N,{label:"Error"},r.a.createElement(z,null,T.b.get("error"))),r.a.createElement(N,{label:"Rudder"},r.a.createElement(z,null,void 0===T.b.get("course")?"N/A":T.b.get("rudder"))," "))}}]),t}(I)),F=n(39),Z=n(3),$=n(185)({cmd:"cmd",ctrl:"ctrl",alt:"alt",shift:"shift",joinWith:"-"}),q=[{key:"rudderTime",text:"RudderTime",inc:10},{key:"rudderWait",text:"Rudder Wait",inc:10},{key:"kP",text:"P",inc:1},{key:"kI",text:"I",inc:1},{key:"kD",text:"D",inc:1}],G=Object(h.a)(function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(v.a)(this,Object(k.a)(t).call(this,e))).state={adjustableValueIdx:0},n.keyUpListener=n.onKeyUp.bind(Object(Z.a)(n)),document.addEventListener("keyup",n.keyUpListener),n}return Object(O.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyUpListener)}},{key:"onKeyUp",value:function(e){var t=$(e);"Down"===t&&this.downArrow(),"Up"===t&&this.upArrow(),"shift-Left"===t&&this.shiftLeft(),"shift-Right"===t&&this.shiftRight()}},{key:"downArrow",value:function(){this.setState({adjustableValueIdx:this.state.adjustableValueIdx<q.length-1?this.state.adjustableValueIdx+1:0})}},{key:"upArrow",value:function(){this.setState({adjustableValueIdx:0===this.state.adjustableValueIdx?Object.keys(q).length-1:this.state.adjustableValueIdx-1})}},{key:"shiftLeft",value:function(){var e=q[this.state.adjustableValueIdx];Object(T.a)(Object(F.a)({},e.key,T.b.get(e.key)-e.inc))}},{key:"shiftRight",value:function(){var e=q[this.state.adjustableValueIdx];Object(T.a)(Object(F.a)({},e.key,T.b.get(e.key)+e.inc))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,q.map(function(t,n){return r.a.createElement(N,{key:t.key,label:t.text},r.a.createElement("span",{key:t.key,style:n===e.state.adjustableValueIdx?Q.highlighted:{}},T.b.get(t.key)))}))}}]),t}(I)),Q={highlighted:{backgroundColor:"black",color:"white"}},X=(n(104),Object(h.a)(function(e){function t(e){var n;return Object(y.a)(this,t),n=Object(v.a)(this,Object(k.a)(t).call(this,e)),T.b.get("voltage")||T.b.set("voltage",1023),n.maxDly=0,n.maxMaxDly=0,n.minHz=999999,setInterval(function(){return n.minHz=999999},5e3),setInterval(function(){n.maxMaxDly=Math.max(n.maxMaxDly,n.maxDly),n.maxDly=0},3e5),n}return Object(O.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.maxDly=isNaN(this.maxDly)?0:Math.max(T.b.get("compassDelay"),this.maxDly),this.minHz=Math.min(T.b.get("hz"),this.minHz),r.a.createElement("div",null,r.a.createElement(N,{label:"Roll"},r.a.createElement(z,null,T.b.get("roll"))),r.a.createElement(N,{label:"Pitch"},r.a.createElement(z,null,T.b.get("pitch"))," "),r.a.createElement(N,{label:"HZ"},T.b.get("hz")),r.a.createElement(N,{label:"Min HZ"},this.minHz),r.a.createElement(N,{label:"R State"},T.b.get("rudderState")),r.a.createElement(N,{label:"Base"},T.b.get("prevBase")),r.a.createElement(N,{label:"Tach"},T.b.get("prevTach")),r.a.createElement(N,{label:"Speed"},T.b.get("prevSpeed")),r.a.createElement(N,{label:"Cmps Dly"},T.b.get("compassDelay")),r.a.createElement(N,{label:"Max Dly"},this.maxDly," (",this.maxMaxDly,")"))}}]),t}(I))),Y=function(e){function t(e){var n;return Object(y.a)(this,t),n=Object(v.a)(this,Object(k.a)(t).call(this,e)),document.addEventListener("keyup",n.keyListener),n}return Object(O.a)(t,e),Object(p.a)(t,[{key:"keyListener",value:function(e){!1===e.shiftKey&&("KeyC"===e.code&&L.Either.of(T.b.get("course")).cata(function(){return Object(T.a)({course:T.b.get("heading")})},function(){return Object(T.a)({course:null})}),"ArrowRight"===e.code&&L.Maybe.of(T.b.get("course")).map(function(e){return 359===e?0:e+1}).map(function(e){return T.b.set("course",e),e}).map(function(e){return Object(T.a)({course:e})}),"ArrowLeft"===e.code&&L.Maybe.of(T.b.get("course")).map(function(e){return Object(T.a)({course:e?e-1:359})}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyListener)}},{key:"render",value:function(){return r.a.createElement(j.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(w.a,{style:{paddingBottom:5}},r.a.createElement(U,null))),r.a.createElement(x.a,null,r.a.createElement(w.a,{xs:6},r.a.createElement(D.a,null,r.a.createElement(K,null),r.a.createElement(G,null))),r.a.createElement(w.a,{xs:6},r.a.createElement(D.a,null,r.a.createElement(X,null)))))}}]),t}(I),_=function(){return r.a.createElement(o.a,{orientation:"vertical"},r.a.createElement(o.b,{flex:.2},r.a.createElement(d,null)),r.a.createElement(o.c,null),r.a.createElement(o.b,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/log",component:g}),r.a.createElement(u.a,{path:"/autopilot",component:Y}),r.a.createElement(u.a,{component:b}))))},ee=n(48),te=Object(h.a)(function(){return r.a.createElement("div",{style:{fontSize:30,paddingLeft:50,paddingTop:50}},r.a.createElement("p",null,r.a.createElement("button",{onClick:ae},T.b.get("course")?"On":"Off")),r.a.createElement("p",null,"Course: ",T.b.get("course")),r.a.createElement("p",null,"Heading: ",T.b.get("heading")),r.a.createElement("p",null,"Error: ",r.a.createElement("span",{style:{color:T.b.get("error")<0?"red":"green"}},T.b.get("error"))),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return ne(-1)}},"<--"),r.a.createElement("button",{style:{marginLeft:50},onClick:function(){return ne(1)}},"--\x3e")))}),ne=function(e){var t=T.b.get("course");(t+=e)>359&&(t=0),t<0&&(t=359),re({course:t}),T.b.set("course",t)},ae=function(){return T.b.get("course")?re({course:null}):re({course:T.b.get("heading")})},re=function(e){return Object(ee.a)("AUTOPILOT",{data:e})},le=function(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{component:te}))};c.a.render(r.a.createElement(function(){return r.a.createElement(i.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/mobile",component:le}),r.a.createElement(u.a,{component:_})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},2:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c});var a=n(5),r=n(48),l=a.k.map();e.values=l;var c=function(e){return Object(r.a)("AUTOPILOT",{data:e})}}).call(this,n(30))},48:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(109),r=n(2),l=new WebSocket("ws://".concat(window.location.hostname,":3001/ws"));l.onmessage=function(e){var t=JSON.parse(e.data);"AUTOPILOT"===t.event&&r.b.merge(t.data)},l.onopen=function(){return l.send(JSON.stringify({cmd:"register",data:{event:"AUTOPILOT"}}))};var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.send(JSON.stringify({cmd:"send",data:Object(a.a)({event:e},t)}))}}},[[110,1,2]]]);
//# sourceMappingURL=main.c5226359.chunk.js.map